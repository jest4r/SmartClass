(this.webpackJsonpemilus=this.webpackJsonpemilus||[]).push([[17],{461:function(e,t,s){"use strict";var a=s(475),c=s.n(a),r=s(32),n=s(476).a(),l=s(29),o=s(265);const i=c.a.create({baseURL:r.a,timeout:6e4}),d="/auth/login";i.interceptors.request.use((e=>{const t=localStorage.getItem(l.b);return t&&(e.headers.authorization=t),t||e.headers["public-request"]||(n.push(d),window.location.reload()),e}),(e=>{o.a.error({message:"Error"}),Promise.reject(e)})),i.interceptors.response.use((e=>e.data),(e=>{let t={message:""};return e.response&&(400!==e.response.status&&403!==e.response.status&&401!==e.response.status||(t.message="Authentication Fail",t.description="Please login again",localStorage.removeItem(l.b),n.push(d),window.location.reload()),404===e.response.status&&(t.message="Not Found"),500===e.response.status&&(t.message="Internal Server Error"),508===e.response.status&&(t.message="Time Out"),o.a.error(t)),Promise.reject(e)}));t.a=i},462:function(e,t,s){"use strict";var a=s(461);const c={getByID:function(e){return a.a.get("/classes/".concat(e))},getAll:function(e){return a.a.get("/classes",{params:e})},delete:function(e){return a.a.delete("/classes/".concat(e))},update:function(e,t){return a.a.post("/classes/".concat(e),t)},create:function(e){return a.a.post("/classes",e)},copy:function(e){return a.a.post("/classes/".concat(e,"/copy"))},import:function(e){const t=new FormData;return t.append("attachment",e),a.a.post("/classes/import",t,{headers:{"Content-Type":"multipart/form-data"}})},exportAll:function(e){if("xlsx"!==e&&"csv"!==e)throw new Error("File type must be either xlsx or csv");return a.a.get("/classes/export?type=".concat(e),{responseType:"blob"})},export:function(e,t){if("xlsx"!==t&&"csv"!==t)throw new Error("File type must be either xlsx or csv");return a.a.post("/classes/export/".concat(t),{ids:e})}};t.a=c},478:function(e,t,s){"use strict";s(0);var a=s(429),c=s(1);const r=e=>Object(c.jsx)(a.a,{...e,className:"ant-avatar-".concat(e.type),children:e.text});t.a=e=>{const{name:t,suffix:s,subTitle:a,id:n,type:l,src:o,icon:i,size:d,shape:p,gap:u,text:j,onNameClick:h}=e;return Object(c.jsxs)("div",{className:"avatar-status d-flex align-items-center",children:[r({icon:i,src:o,type:l,size:d,shape:p,gap:u,text:j}),Object(c.jsxs)("div",{className:"ml-2",children:[Object(c.jsxs)("div",{children:[h?Object(c.jsx)("div",{onClick:()=>h({name:t,subTitle:a,src:o,id:n}),className:"avatar-status-name clickable",children:t}):Object(c.jsx)("div",{className:"avatar-status-name",children:t}),Object(c.jsx)("span",{children:s})]}),Object(c.jsx)("div",{className:"text-muted avatar-status-subtitle",children:a})]})]})}},574:function(e,t,s){"use strict";s(0);var a=s(420),c=s(184),r=s(142),n=s(1);const l=e=>Object(n.jsx)(a.a,{overlay:e.menu,placement:e.placement,trigger:["click"],children:Object(n.jsx)("div",{className:"ellipsis-dropdown",children:Object(n.jsx)(r.a,{})})});l.defaultProps={trigger:"click",placement:"bottomRight",menu:Object(n.jsx)(c.a,{})},t.a=l},576:function(e,t,s){"use strict";var a=s(3),c=s(0),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},n=s(12),l=function(e,t){return c.createElement(n.a,Object(a.a)(Object(a.a)({},e),{},{ref:t,icon:r}))};l.displayName="DeleteOutlined";t.a=c.forwardRef(l)},587:function(e,t,s){"use strict";s.r(t);var a=s(0),c=s.n(a),r=s(79),n=s(184),l=s(264),o=s(636),i=s(427),d=s(110),p=s(633),u=s(462),j=s(238),h=s(443),m=s(576),b=s(448),x=s(163),g=s(622),O=s(478),v=s(574),f=s(116),y=s(40),w=s(51),C=s(1);const{Option:N}=r.a;t.default=()=>{let e=Object(y.g)();const[t,s]=Object(a.useState)([]);c.a.useEffect((()=>{(async()=>{try{const e=await u.a.getAll();s(e.data||[])}catch(e){console.error("Error fetching classes:",e),s([])}})()}),[]);const[I,E]=Object(a.useState)([]);c.a.useEffect((()=>{E(t)}),[t]);const[S,k]=Object(a.useState)([]),[z,D]=Object(a.useState)([]),T=t=>{e.push("/app/apps/edit-class/".concat(t.id))},A=t=>{e.push("/app/apps/view-class/".concat(t.id))},R=async t=>{try{const s="id";let a=[...I];if(S.length>1){for(const e of S)await u.a.delete(e.id),a=w.a.deleteArrayRow(a,s,e.id);l.b.success("Classes deleted successfully")}else t&&(await u.a.delete(t.id),a=w.a.deleteArrayRow(a,s,t.id),l.b.success("Class deleted successfully"));E(a),k([]),D([]),e.push("/app/apps/classes")}catch(s){l.b.error("Error deleting class(es)"),console.error("Error deleting class(es):",s)}},F=t=>{e.push("/app/apps/copy-class/".concat(t.id))},H=[{title:"ID",dataIndex:"id",render:(e,t,s)=>s+1,sorter:(e,t)=>e.id-t.id},{title:"Class Name",dataIndex:"name",render:(e,t)=>Object(C.jsx)("div",{className:"d-flex",children:Object(C.jsx)(O.a,{size:60,type:"square",src:"/img/thumbs/book.webp",name:t.name})}),sorter:(e,t)=>w.a.antdTableSorter(e,t,"name")},{title:"Code",dataIndex:"code",sorter:(e,t)=>w.a.antdTableSorter(e,t,"code")},{title:"Description",dataIndex:"description",sorter:(e,t)=>w.a.antdTableSorter(e,t,"description")},{title:"",dataIndex:"actions",render:(e,t)=>{return Object(C.jsx)("div",{className:"text-right",children:Object(C.jsx)(v.a,{menu:(s=t,Object(C.jsxs)(n.a,{children:[Object(C.jsx)(n.a.Item,{onClick:()=>A(s),children:Object(C.jsxs)(f.a,{alignItems:"center",children:[Object(C.jsx)(j.a,{}),Object(C.jsx)("span",{className:"ml-2",children:"View Details"})]})}),Object(C.jsx)(n.a.Item,{onClick:()=>T(s),children:Object(C.jsxs)(f.a,{alignItems:"center",children:[Object(C.jsx)(h.a,{}),Object(C.jsx)("span",{className:"ml-2",children:"Edit"})]})}),Object(C.jsx)(n.a.Item,{onClick:()=>R(s),children:Object(C.jsxs)(f.a,{alignItems:"center",children:[Object(C.jsx)(m.a,{}),Object(C.jsx)("span",{className:"ml-2",children:S.length>0?"Delete (".concat(S.length,")"):"Delete"})]})}),Object(C.jsx)(n.a.Item,{onClick:()=>F(s),children:Object(C.jsxs)(f.a,{alignItems:"center",children:[Object(C.jsx)(b.a,{}),Object(C.jsx)("span",{className:"ml-2",children:"Copy"})]})})]}))})});var s}}],P={onChange:(e,t)=>{k(t),D(e)}};return Object(C.jsxs)(o.a,{children:[Object(C.jsxs)(f.a,{alignItems:"center",justifyContent:"between",mobileFlex:!1,children:[Object(C.jsxs)(f.a,{className:"mb-1",mobileFlex:!1,children:[Object(C.jsx)("div",{className:"mr-md-3 mb-3",children:Object(C.jsx)(i.a,{placeholder:"Search",prefix:Object(C.jsx)(x.a,{}),onChange:e=>(e=>{const s=e.currentTarget.value,a=e.currentTarget.value?I:t,c=w.a.wildCardSearch(a,s);E(c),D([])})(e)})}),Object(C.jsx)("div",{className:"mb-3",children:Object(C.jsxs)(r.a,{defaultValue:"Action",className:"w-100",style:{minWidth:180},placeholder:"Action",onChange:t=>{"Export"===t&&(console.log("exporting"),e.push("/app/apps/export-class")),"Import"===t&&(console.log("importing"),e.push("/app/apps/import-class")),"Delete"===t&&(console.log("deleting"),R()),"Copy"===t&&(async t=>{try{if(S.length>1){for(const e of S)await u.a.copy(e.id);l.b.success("Classes copied successfully"),e.push("/app/apps/classes")}else t&&(await u.a.copy(t.id),l.b.success("Class copied successfully"));k([]),D([])}catch(s){l.b.error("Error copying class(es)"),console.error("Error copying class(es):",s)}})()},children:[Object(C.jsx)(N,{value:"Export",children:"Export data"}),Object(C.jsx)(N,{value:"Import",children:"Import data"}),Object(C.jsx)(N,{value:"Delete",children:"Delete data"}),Object(C.jsx)(N,{value:"Copy",children:"Copy data"})]})})]}),Object(C.jsx)("div",{children:Object(C.jsx)(d.a,{onClick:()=>{e.push("/app/apps/add-class")},type:"primary",icon:Object(C.jsx)(g.a,{}),block:!0,children:"Add Class"})})]}),Object(C.jsx)("div",{className:"table-responsive",children:Object(C.jsx)(p.a,{columns:H,dataSource:I,rowKey:"id",pagination:{showSizeChanger:!0,showTotal:(e,t)=>"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")},rowSelection:{selectedRowKeys:z,type:"checkbox",preserveSelectedRowKeys:!1,...P}})})]})}},622:function(e,t,s){"use strict";var a=s(3),c=s(0),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},n=s(12),l=function(e,t){return c.createElement(n.a,Object(a.a)(Object(a.a)({},e),{},{ref:t,icon:r}))};l.displayName="PlusCircleOutlined";t.a=c.forwardRef(l)}}]);
//# sourceMappingURL=17.99685682.chunk.js.map