(this.webpackJsonpemilus=this.webpackJsonpemilus||[]).push([[25],{461:function(e,t,s){"use strict";var a=s(475),r=s.n(a),n=s(32),o=s(476).a(),c=s(29),i=s(265);const l=r.a.create({baseURL:n.a,timeout:6e4}),d="/auth/login";l.interceptors.request.use((e=>{const t=localStorage.getItem(c.b);return t&&(e.headers.authorization=t),t||e.headers["public-request"]||(o.push(d),window.location.reload()),e}),(e=>{i.a.error({message:"Error"}),Promise.reject(e)})),l.interceptors.response.use((e=>e.data),(e=>{let t={message:""};return e.response&&(400!==e.response.status&&403!==e.response.status&&401!==e.response.status||(t.message="Authentication Fail",t.description="Please login again",localStorage.removeItem(c.b),o.push(d),window.location.reload()),404===e.response.status&&(t.message="Not Found"),500===e.response.status&&(t.message="Internal Server Error"),508===e.response.status&&(t.message="Time Out"),i.a.error(t)),Promise.reject(e)}));t.a=l},470:function(e,t,s){"use strict";var a=s(461);const r={getByID:function(e){return a.a.get("/students/".concat(e))},getAll:function(e){return a.a.get("/students",{params:e})},delete:function(e){return a.a.delete("/students/".concat(e))},update:function(e,t){return a.a.post("/students/".concat(e),t)},create:function(e){return a.a.post("/students",e)},copy:function(e){return a.a.post("/students/".concat(e,"/copy"))},import:function(e){const t=new FormData;return t.append("attachment",e),a.a.post("/students/import",t,{headers:{"Content-Type":"multipart/form-data"}})},exportAll:function(e){if("xlsx"!==e&&"csv"!==e)throw new Error("File type must be either xlsx or csv");return a.a.get("/students/export?type=".concat(e),{responseType:"blob"})},export:function(e,t){if("xlsx"!==t&&"csv"!==t)throw new Error("File type must be either xlsx or csv");return a.a.post("/students/export/".concat(t),{ids:e})}};t.a=r},478:function(e,t,s){"use strict";s(0);var a=s(429),r=s(1);const n=e=>Object(r.jsx)(a.a,{...e,className:"ant-avatar-".concat(e.type),children:e.text});t.a=e=>{const{name:t,suffix:s,subTitle:a,id:o,type:c,src:i,icon:l,size:d,shape:u,gap:m,text:p,onNameClick:x}=e;return Object(r.jsxs)("div",{className:"avatar-status d-flex align-items-center",children:[n({icon:l,src:i,type:c,size:d,shape:u,gap:m,text:p}),Object(r.jsxs)("div",{className:"ml-2",children:[Object(r.jsxs)("div",{children:[x?Object(r.jsx)("div",{onClick:()=>x({name:t,subTitle:a,src:i,id:o}),className:"avatar-status-name clickable",children:t}):Object(r.jsx)("div",{className:"avatar-status-name",children:t}),Object(r.jsx)("span",{children:s})]}),Object(r.jsx)("div",{className:"text-muted avatar-status-subtitle",children:a})]})]})}},619:function(e,t,s){"use strict";s.r(t);var a=s(0),r=s.n(a),n=s(79),o=s(264),c=s(636),i=s(634),l=s(110),d=s(633),u=s(470),m=s(478),p=s(116),x=s(51),b=s(1);const{Option:j}=n.a;t.default=()=>{const[e,t]=Object(a.useState)([]),[s,h]=Object(a.useState)(!1),[f,v]=Object(a.useState)([]);r.a.useEffect((()=>{v(e)}),[e]);const g=[{title:"ID",dataIndex:"id",render:(e,t,s)=>s+1,sorter:(e,t)=>e.id-t.id},{title:"Student Name",dataIndex:"fullname",render:(e,t)=>Object(b.jsx)("div",{className:"d-flex",children:Object(b.jsx)(m.a,{size:60,type:"square",src:t.attachment,name:t.fullname})}),sorter:(e,t)=>x.a.antdTableSorter(e,t,"name")},{title:"Student Code",dataIndex:"code",sorter:(e,t)=>x.a.antdTableSorter(e,t,"code")},{title:"Gender",dataIndex:"sex",sorter:(e,t)=>x.a.antdTableSorter(e,t,"sex")},{title:"Date of Birth",dataIndex:"dob",sorter:(e,t)=>x.a.antdTableSorter(e,t,"dob")},{title:"Home City",dataIndex:"homecity",sorter:(e,t)=>x.a.antdTableSorter(e,t,"homecity")},{title:"Address",dataIndex:"address",sorter:(e,t)=>x.a.antdTableSorter(e,t,"address")},{title:"Phone",dataIndex:"phone",sorter:(e,t)=>x.a.antdTableSorter(e,t,"phone")},{title:"Email",dataIndex:"email",sorter:(e,t)=>x.a.antdTableSorter(e,t,"email")},{title:"Class",dataIndex:"class_id",sorter:(e,t)=>x.a.antdTableSorter(e,t,"classid")},{title:"Username",dataIndex:"username",sorter:(e,t)=>x.a.antdTableSorter(e,t,"username")}],[O,y]=Object(a.useState)("xlsx"),[S,I]=Object(a.useState)([]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"mb-3",children:Object(b.jsx)(c.a,{children:Object(b.jsxs)(p.a,{alignItems:"center",justifyContent:"space-between",children:[Object(b.jsx)("h3",{className:"mb-0 mr-5",children:"Import Students"}),Object(b.jsxs)(p.a,{justifyContent:"flex-start",children:[Object(b.jsx)(i.a,{accept:".xlsx,.csv,.json",showUploadList:!0,beforeUpload:e=>(o.b.info("File selected. Please click Import to proceed."),!1),fileList:S,onChange:e=>{let{file:t,fileList:s}=e;I(s)},children:Object(b.jsx)(l.a,{type:"primary",style:{marginRight:16},children:"Select File"})}),Object(b.jsxs)(n.a,{defaultValue:"xlsx",style:{width:200,marginLeft:16},onChange:e=>{y(e)},placeholder:"Select file type",children:[Object(b.jsx)(j,{value:"xlsx",children:"Excel (.xlsx)"}),Object(b.jsx)(j,{value:"csv",children:"CSV (.csv)"}),Object(b.jsx)(j,{value:"json",children:"JSON (.json)"})]}),Object(b.jsx)(l.a,{onClick:()=>{var s;if(0===S.length)return void o.b.error("Please select a file first");if(!O)return void o.b.error("Please select a file type");h(!0);const a=null===(s=S[0])||void 0===s?void 0:s.originFileObj;if(!a)return o.b.error("Invalid file"),void h(!1);(async()=>{try{const s=await u.a.import(a);s&&s.data&&(console.log("Imported students:",s.data),t(s.data.created),o.b.success("Students imported successfully"),console.log(e))}catch(s){console.error("Error importing Students:",s),o.b.error("Failed to import students. Please check the file format.")}finally{h(!1)}})()},type:"primary",loading:s,style:{marginLeft:500},children:"Import"})]})]})})}),Object(b.jsx)(c.a,{children:Object(b.jsx)("div",{className:"table-responsive",children:Object(b.jsx)(d.a,{columns:g,dataSource:f,rowKey:"id",loading:s})})})]})}}}]);
//# sourceMappingURL=25.9ddcc739.chunk.js.map