(this.webpackJsonpemilus=this.webpackJsonpemilus||[]).push([[18],{461:function(e,t,s){"use strict";var a=s(475),c=s.n(a),r=s(32),n=s(476).a(),o=s(29),l=s(265);const i=c.a.create({baseURL:r.a,timeout:6e4}),d="/auth/login";i.interceptors.request.use((e=>{const t=localStorage.getItem(o.b);return t&&(e.headers.authorization=t),t||e.headers["public-request"]||(n.push(d),window.location.reload()),e}),(e=>{l.a.error({message:"Error"}),Promise.reject(e)})),i.interceptors.response.use((e=>e.data),(e=>{let t={message:""};return e.response&&(400!==e.response.status&&403!==e.response.status&&401!==e.response.status||(t.message="Authentication Fail",t.description="Please login again",localStorage.removeItem(o.b),n.push(d),window.location.reload()),404===e.response.status&&(t.message="Not Found"),500===e.response.status&&(t.message="Internal Server Error"),508===e.response.status&&(t.message="Time Out"),l.a.error(t)),Promise.reject(e)}));t.a=i},470:function(e,t,s){"use strict";var a=s(461);const c={getByID:function(e){return a.a.get("/students/".concat(e))},getAll:function(e){return a.a.get("/students",{params:e})},delete:function(e){return a.a.delete("/students/".concat(e))},update:function(e,t){return a.a.post("/students/".concat(e),t)},create:function(e){return a.a.post("/students",e)},copy:function(e){return a.a.post("/students/".concat(e,"/copy"))},import:function(e){const t=new FormData;return t.append("attachment",e),a.a.post("/students/import",t,{headers:{"Content-Type":"multipart/form-data"}})},exportAll:function(e){if("xlsx"!==e&&"csv"!==e)throw new Error("File type must be either xlsx or csv");return a.a.get("/students/export?type=".concat(e),{responseType:"blob"})},export:function(e,t){if("xlsx"!==t&&"csv"!==t)throw new Error("File type must be either xlsx or csv");return a.a.post("/students/export/".concat(t),{ids:e})}};t.a=c},478:function(e,t,s){"use strict";s(0);var a=s(429),c=s(1);const r=e=>Object(c.jsx)(a.a,{...e,className:"ant-avatar-".concat(e.type),children:e.text});t.a=e=>{const{name:t,suffix:s,subTitle:a,id:n,type:o,src:l,icon:i,size:d,shape:u,gap:p,text:h,onNameClick:m}=e;return Object(c.jsxs)("div",{className:"avatar-status d-flex align-items-center",children:[r({icon:i,src:l,type:o,size:d,shape:u,gap:p,text:h}),Object(c.jsxs)("div",{className:"ml-2",children:[Object(c.jsxs)("div",{children:[m?Object(c.jsx)("div",{onClick:()=>m({name:t,subTitle:a,src:l,id:n}),className:"avatar-status-name clickable",children:t}):Object(c.jsx)("div",{className:"avatar-status-name",children:t}),Object(c.jsx)("span",{children:s})]}),Object(c.jsx)("div",{className:"text-muted avatar-status-subtitle",children:a})]})]})}},574:function(e,t,s){"use strict";s(0);var a=s(420),c=s(184),r=s(142),n=s(1);const o=e=>Object(n.jsx)(a.a,{overlay:e.menu,placement:e.placement,trigger:["click"],children:Object(n.jsx)("div",{className:"ellipsis-dropdown",children:Object(n.jsx)(r.a,{})})});o.defaultProps={trigger:"click",placement:"bottomRight",menu:Object(n.jsx)(c.a,{})},t.a=o},576:function(e,t,s){"use strict";var a=s(3),c=s(0),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},n=s(12),o=function(e,t){return c.createElement(n.a,Object(a.a)(Object(a.a)({},e),{},{ref:t,icon:r}))};o.displayName="DeleteOutlined";t.a=c.forwardRef(o)},608:function(e,t,s){"use strict";s.r(t);var a=s(0),c=s.n(a),r=s(79),n=s(184),o=s(264),l=s(636),i=s(427),d=s(110),u=s(633),p=s(470),h=s(238),m=s(443),j=s(576),b=s(448),x=s(163),O=s(622),g=s(478),f=s(574),v=s(116),y=s(40),w=s(51),S=s(1);const{Option:I}=r.a;t.default=()=>{let e=Object(y.g)();const[t,s]=Object(a.useState)([]);c.a.useEffect((()=>{(async()=>{try{const e=await p.a.getAll();s(e.data||[])}catch(e){console.error("Error fetching students:",e),s([])}})()}),[]);const[N,C]=Object(a.useState)([]);c.a.useEffect((()=>{C(t)}),[t]);const[E,T]=Object(a.useState)([]),[k,z]=Object(a.useState)([]),D=t=>{e.push("/app/apps/edit-student/".concat(t.id))},A=t=>{e.push("/app/apps/view-student/".concat(t.id))},F=async t=>{try{const s="id";let a=[...N];if(E.length>1){for(const e of E)await p.a.delete(e.id),a=w.a.deleteArrayRow(a,s,e.id);o.b.success("Student deleted successfully")}else t&&(await p.a.delete(t.id),a=w.a.deleteArrayRow(a,s,t.id),o.b.success("Student deleted successfully"));C(a),T([]),z([]),e.push("/app/apps/students")}catch(s){o.b.error("Error deleting student(s)"),console.error("Error deleting student(es):",s)}},R=t=>{e.push("/app/apps/copy-student/".concat(t.id))},H=[{title:"ID",dataIndex:"id",render:(e,t,s)=>s+1,sorter:(e,t)=>e.id-t.id},{title:"Full Name",dataIndex:"fullname",render:(e,t)=>Object(S.jsx)("div",{className:"d-flex",children:Object(S.jsx)(g.a,{size:60,type:"square",src:t.attachment,name:t.fullname})}),sorter:(e,t)=>w.a.antdTableSorter(e,t,"name")},{title:"Student Code",dataIndex:"code",sorter:(e,t)=>w.a.antdTableSorter(e,t,"code")},{title:"Gender",dataIndex:"sex",width:"100px",sorter:(e,t)=>w.a.antdTableSorter(e,t,"sex")},{title:"Date of Birth",dataIndex:"dob",sorter:(e,t)=>w.a.antdTableSorter(e,t,"dob")},{title:"Home City",dataIndex:"homecity",sorter:(e,t)=>w.a.antdTableSorter(e,t,"homecity")},{title:"Address",dataIndex:"address",sorter:(e,t)=>w.a.antdTableSorter(e,t,"address")},{title:"Phone",dataIndex:"phone",sorter:(e,t)=>w.a.antdTableSorter(e,t,"phone")},{title:"Email",dataIndex:"email",sorter:(e,t)=>w.a.antdTableSorter(e,t,"email")},{title:"Class",dataIndex:"class_id",sorter:(e,t)=>w.a.antdTableSorter(e,t,"class_id")},{title:"Username",dataIndex:"username",sorter:(e,t)=>w.a.antdTableSorter(e,t,"username")},{title:"",dataIndex:"actions",width:"80px",render:(e,t)=>{return Object(S.jsx)("div",{className:"text-right",children:Object(S.jsx)(f.a,{className:"flex-start",menu:(s=t,Object(S.jsxs)(n.a,{children:[Object(S.jsx)(n.a.Item,{onClick:()=>A(s),children:Object(S.jsxs)(v.a,{alignItems:"center",children:[Object(S.jsx)(h.a,{}),Object(S.jsx)("span",{className:"ml-2",children:"View Details"})]})}),Object(S.jsx)(n.a.Item,{onClick:()=>D(s),children:Object(S.jsxs)(v.a,{alignItems:"center",children:[Object(S.jsx)(m.a,{}),Object(S.jsx)("span",{className:"ml-2",children:"Edit"})]})}),Object(S.jsx)(n.a.Item,{onClick:()=>F(s),children:Object(S.jsxs)(v.a,{alignItems:"center",children:[Object(S.jsx)(j.a,{}),Object(S.jsx)("span",{className:"ml-2",children:E.length>0?"Delete (".concat(E.length,")"):"Delete"})]})}),Object(S.jsx)(n.a.Item,{onClick:()=>R(s),children:Object(S.jsxs)(v.a,{alignItems:"center",children:[Object(S.jsx)(b.a,{}),Object(S.jsx)("span",{className:"ml-2",children:"Copy"})]})})]}))})});var s}}],P={onChange:(e,t)=>{T(t),z(e)}};return Object(S.jsxs)(l.a,{children:[Object(S.jsxs)(v.a,{alignItems:"center",justifyContent:"between",mobileFlex:!1,children:[Object(S.jsxs)(v.a,{className:"mb-1",mobileFlex:!1,children:[Object(S.jsx)("div",{className:"mr-md-3 mb-3",children:Object(S.jsx)(i.a,{placeholder:"Search",prefix:Object(S.jsx)(x.a,{}),onChange:e=>(e=>{const s=e.currentTarget.value,a=e.currentTarget.value?N:t,c=w.a.wildCardSearch(a,s);C(c),z([])})(e)})}),Object(S.jsx)("div",{className:"mb-3",children:Object(S.jsxs)(r.a,{defaultValue:"Action",className:"w-100",style:{minWidth:180},placeholder:"Action",onChange:t=>{"Export"===t&&(console.log("exporting"),e.push("/app/apps/export-student")),"Import"===t&&(console.log("importing"),e.push("/app/apps/import-student")),"Delete"===t&&(console.log("deleting"),F()),"Copy"===t&&(async t=>{try{if(E.length>1){for(const e of E)await p.a.copy(e.id);o.b.success("Students copied successfully"),e.push("/app/apps/students")}else t&&(await p.a.copy(t.id),o.b.success("Students copied successfully"));T([]),z([])}catch(s){o.b.error("Error copying student(s)"),console.error("Error copying student(s):",s)}})()},children:[Object(S.jsx)(I,{value:"Export",children:"Export data"}),Object(S.jsx)(I,{value:"Import",children:"Import data"}),Object(S.jsx)(I,{value:"Delete",children:"Delete data"}),Object(S.jsx)(I,{value:"Copy",children:"Copy data"})]})})]}),Object(S.jsx)("div",{children:Object(S.jsx)(d.a,{onClick:()=>{e.push("/app/apps/add-student")},type:"primary",icon:Object(S.jsx)(O.a,{}),block:!0,children:"Add Student"})})]}),Object(S.jsx)("div",{className:"table-responsive",children:Object(S.jsx)(u.a,{columns:H,dataSource:N,rowKey:"id",size:"middle",pagination:{showSizeChanger:!0,showTotal:(e,t)=>"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")},rowSelection:{selectedRowKeys:k,type:"checkbox",preserveSelectedRowKeys:!1,...P}})})]})}},622:function(e,t,s){"use strict";var a=s(3),c=s(0),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},n=s(12),o=function(e,t){return c.createElement(n.a,Object(a.a)(Object(a.a)({},e),{},{ref:t,icon:r}))};o.displayName="PlusCircleOutlined";t.a=c.forwardRef(o)}}]);
//# sourceMappingURL=18.14a9c284.chunk.js.map