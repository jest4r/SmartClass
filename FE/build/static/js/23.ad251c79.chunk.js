(this.webpackJsonpemilus=this.webpackJsonpemilus||[]).push([[23],{461:function(e,t,s){"use strict";var a=s(475),r=s.n(a),c=s(32),n=s(476).a(),o=s(29),i=s(265);const l=r.a.create({baseURL:c.a,timeout:6e4}),d="/auth/login";l.interceptors.request.use((e=>{const t=localStorage.getItem(o.b);return t&&(e.headers.authorization=t),t||e.headers["public-request"]||(n.push(d),window.location.reload()),e}),(e=>{i.a.error({message:"Error"}),Promise.reject(e)})),l.interceptors.response.use((e=>e.data),(e=>{let t={message:""};return e.response&&(400!==e.response.status&&403!==e.response.status&&401!==e.response.status||(t.message="Authentication Fail",t.description="Please login again",localStorage.removeItem(o.b),n.push(d),window.location.reload()),404===e.response.status&&(t.message="Not Found"),500===e.response.status&&(t.message="Internal Server Error"),508===e.response.status&&(t.message="Time Out"),i.a.error(t)),Promise.reject(e)}));t.a=l},462:function(e,t,s){"use strict";var a=s(461);const r={getByID:function(e){return a.a.get("/classes/".concat(e))},getAll:function(e){return a.a.get("/classes",{params:e})},delete:function(e){return a.a.delete("/classes/".concat(e))},update:function(e,t){return a.a.post("/classes/".concat(e),t)},create:function(e){return a.a.post("/classes",e)},copy:function(e){return a.a.post("/classes/".concat(e,"/copy"))},import:function(e){const t=new FormData;return t.append("attachment",e),a.a.post("/classes/import",t,{headers:{"Content-Type":"multipart/form-data"}})},exportAll:function(e){if("xlsx"!==e&&"csv"!==e)throw new Error("File type must be either xlsx or csv");return a.a.get("/classes/export?type=".concat(e),{responseType:"blob"})},export:function(e,t){if("xlsx"!==t&&"csv"!==t)throw new Error("File type must be either xlsx or csv");return a.a.post("/classes/export/".concat(t),{ids:e})}};t.a=r},478:function(e,t,s){"use strict";s(0);var a=s(429),r=s(1);const c=e=>Object(r.jsx)(a.a,{...e,className:"ant-avatar-".concat(e.type),children:e.text});t.a=e=>{const{name:t,suffix:s,subTitle:a,id:n,type:o,src:i,icon:l,size:d,shape:u,gap:p,text:m,onNameClick:j}=e;return Object(r.jsxs)("div",{className:"avatar-status d-flex align-items-center",children:[c({icon:l,src:i,type:o,size:d,shape:u,gap:p,text:m}),Object(r.jsxs)("div",{className:"ml-2",children:[Object(r.jsxs)("div",{children:[j?Object(r.jsx)("div",{onClick:()=>j({name:t,subTitle:a,src:i,id:n}),className:"avatar-status-name clickable",children:t}):Object(r.jsx)("div",{className:"avatar-status-name",children:t}),Object(r.jsx)("span",{children:s})]}),Object(r.jsx)("div",{className:"text-muted avatar-status-subtitle",children:a})]})]})}},613:function(e,t,s){"use strict";s.r(t);var a=s(0),r=s.n(a),c=s(79),n=s(264),o=s(636),i=s(634),l=s(110),d=s(633),u=s(462),p=s(478),m=s(116),j=s(51),b=s(1);const{Option:x}=c.a;t.default=()=>{const[e,t]=Object(a.useState)([]),[s,h]=Object(a.useState)(!1),[f,v]=Object(a.useState)([]);r.a.useEffect((()=>{v(e)}),[e]);const g=[{title:"ID",dataIndex:"id"},{title:"Class Name",dataIndex:"name",render:(e,t)=>Object(b.jsx)("div",{className:"d-flex",children:Object(b.jsx)(p.a,{size:60,type:"square",src:"/img/thumbs/book.webp",name:t.name})}),sorter:(e,t)=>j.a.antdTableSorter(e,t,"name")},{title:"Code",dataIndex:"code",sorter:(e,t)=>j.a.antdTableSorter(e,t,"code")},{title:"Description",dataIndex:"description",sorter:(e,t)=>j.a.antdTableSorter(e,t,"description")}],[O,y]=Object(a.useState)("xlsx"),[w,S]=Object(a.useState)([]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"mb-3",children:Object(b.jsx)(o.a,{children:Object(b.jsxs)(m.a,{alignItems:"center",justifyContent:"space-between",children:[Object(b.jsx)("h3",{className:"mb-0 mr-5",children:"Import Classes"}),Object(b.jsxs)(m.a,{justifyContent:"flex-start",children:[Object(b.jsx)(i.a,{accept:".xlsx,.csv,.json",showUploadList:!0,beforeUpload:e=>(n.b.info("File selected. Please click Import to proceed."),!1),fileList:w,onChange:e=>{let{file:t,fileList:s}=e;S(s)},children:Object(b.jsx)(l.a,{type:"primary",style:{marginRight:16},children:"Select File"})}),Object(b.jsxs)(c.a,{defaultValue:"xlsx",style:{width:200,marginLeft:16},onChange:e=>{y(e)},placeholder:"Select file type",children:[Object(b.jsx)(x,{value:"xlsx",children:"Excel (.xlsx)"}),Object(b.jsx)(x,{value:"csv",children:"CSV (.csv)"}),Object(b.jsx)(x,{value:"json",children:"JSON (.json)"})]}),Object(b.jsx)(l.a,{onClick:()=>{var s;if(0===w.length)return void n.b.error("Please select a file first");if(!O)return void n.b.error("Please select a file type");h(!0);const a=null===(s=w[0])||void 0===s?void 0:s.originFileObj;if(!a)return n.b.error("Invalid file"),void h(!1);(async()=>{try{const s=await u.a.import(a);s&&s.data&&(console.log("Imported classes:",s.data),t(s.data.created),n.b.success("Classes imported successfully"),console.log(e))}catch(s){console.error("Error importing classes:",s),n.b.error("Failed to import classes. Please check the file format.")}finally{h(!1)}})()},type:"primary",loading:s,style:{marginLeft:500},children:"Import"})]})]})})}),Object(b.jsx)(o.a,{children:Object(b.jsx)("div",{className:"table-responsive",children:Object(b.jsx)(d.a,{columns:g,dataSource:f,rowKey:"id",loading:s})})})]})}}}]);
//# sourceMappingURL=23.ad251c79.chunk.js.map